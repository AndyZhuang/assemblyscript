<!DOCTYPE html>
<html>
<head>
<style>
  body {
    font: 14px/150% sans-serif;
    margin: 40px 50px;
  }
  input,
  button {
    width: 100px;
    height: 28px;
    box-sizing: border-box;
    border: 1px solid #BBB;
    border-radius: 5px;
    font: inherit;
    line-height: 20px;
    padding: 1px 0;
    background: linear-gradient(white, #F7F7F7);
    cursor: pointer;
    color: black;
  }
  input {
    width: 200px;
    padding-left: 5px;
    background: white;
  }
  button:hover,
  input:focus {
    color:#0074c1;
  }
  textarea {
    width: 100%;
    height: 400px;
    min-height: 400px;
    resize: vertical;
    margin: 0;
    border: 1px solid #CCC;
    border-radius: 5px;
    padding: 5px;
  }
</style>
<script>
var exports;
function load(file) {
  console.log("loading '" + file + "' ...");
  fetch(file)
    .then(result => result.arrayBuffer())
    .then(buffer => WebAssembly.instantiate(buffer, {}))
    .then(result => {
      Object.keys(exports = result.instance.exports).forEach(key => {
        if (typeof exports[key] === 'function')
          console.log("> exports." + key + "(" + exports[key].length + ")");
        else
          console.log("> exports." + key);
      });
      console.log("loaded.");
      fetch(file.replace(/\.wasm$/, ".wast"))
        .then(result => result.text())
        .then(text => {
          document.getElementById("wast").value = text;
        }, err => {
          document.getElementById("wast").value = "Text format not available.";
        });
    }, err => {
      document.getElementById("wast").value = err.message + "\n\n" + err.stack;
      document.getElementById("wast").style.display = "block";
    });
}
</script>
</head>
<body style="font-family: sans-serif">

<h1>Usage</h1>
<ol>
  <li>Open the developer console</li>
  <li>Load a module:
    <input type="text" value="fib.wasm" id="file" /> <button onclick="load(document.getElementById('file').value)">Load</button></li>
  <li>Access 'exports' via the console</li>
</ol>

<textarea id="wast"></textarea>

</body>
</html>
